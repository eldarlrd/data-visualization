import{c as M,s as v,h as x,a as A}from"./index-BG6vf5fz.js";import{a as N,i as S,b as $,c as k,d as F,u as O}from"./useApi-CBYkAbkT.js";import{b as g,a as J,c as V}from"./band-CI1WAP09.js";import{r as C,c as E}from"./ramp-CCIUSDs0.js";function R(t,r){let n,e;if(r===void 0)for(const o of t)o!=null&&(n===void 0?o>=o&&(n=e=o):(n>o&&(n=o),e<o&&(e=o)));else{let o=-1;for(let f of t)(f=r(f,++o,t))!=null&&(n===void 0?f>=f&&(n=e=f):(n>f&&(n=f),e<f&&(e=f)))}return[n,e]}function T(){var t=0,r=1,n,e,o,f,s=S,d=!1,l;function i(a){return a==null||isNaN(a=+a)?l:s(o===0?.5:(a=(f(a)-n)*o,d?Math.max(0,Math.min(1,a)):a))}i.domain=function(a){return arguments.length?([t,r]=a,n=f(t=+t),e=f(r=+r),o=n===e?0:1/(e-n),i):[t,r]},i.clamp=function(a){return arguments.length?(d=!!a,i):d},i.interpolator=function(a){return arguments.length?(s=a,i):s};function u(a){return function(b){var m,p;return arguments.length?([m,p]=b,s=a(m,p),i):[s(0),s(1)]}}return i.range=u(k),i.rangeRound=u(F),i.unknown=function(a){return arguments.length?(l=a,i):l},function(a){return f=a,n=a(t),e=a(r),o=n===e?0:1/(e-n),i}}function L(t,r){return r.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function w(){var t=N(T()(S));return t.copy=function(){return L(t,w())},$.apply(t,arguments)}var U=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(E);const Y=C(U),y=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],B=["January","February","March","April","May","June","July","August","September","October","November","December"],H=(t,r,n)=>{const o="black",f=t.clientY,s=r.variance>0?`+${r.variance.toFixed(2)}`:r.variance.toFixed(2);A({e:t,posY:f,width:10.5,fillColor:o}),v("#tooltip").html(`
      <strong>
        ${r.year.toString()} ${B[r.month-1]} 
      </strong>
      <br>
      ${(n+r.variance).toFixed(2)} °C | ${s} °C
    `)},D=t=>{const{baseTemperature:r,monthlyVariance:n}=t,e={top:0,right:60,bottom:20,left:80},o=800-e.left-e.right,f=400-e.top-e.bottom,s=v("#heat-map").attr("width",o+e.left+e.right).attr("height",f+e.top+e.bottom).append("g").attr("transform",`translate(${e.left.toString()}, ${e.top.toString()})`),d=[...new Set(n.map(c=>c.year.toString()))],l=g().range([0,o]).domain(d),i=g().range([0,f]).domain(y),u=R(n,c=>r+c.variance),a=u[0]??0,b=u[1]??0,m=w().interpolator(Y).domain([b,a]);s.selectAll().data(n).enter().append("rect").attr("x",c=>l(c.year.toString())??0).attr("y",c=>i(y[c.month-1])??0).attr("width",l.bandwidth()).attr("height",i.bandwidth()).style("fill",c=>m(r+c.variance)).on("mouseover",(c,h)=>{H(c,h,r)}).on("mouseout",(c,h)=>{x(c,m(r+h.variance),!0)});const p=d.filter(c=>+c%10===0);s.append("g").attr("transform",`translate(0, ${f.toString()})`).call(J(l).tickValues(p)),s.append("g").call(V(i))},_=()=>(O("temperature").then(t=>{D(t)}).catch(t=>{t instanceof Error&&console.error(t)}),M(2,"heat-map"));export{_ as HeatMap};
