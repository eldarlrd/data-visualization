import{c as g,s as d,d as S,h as y,a as w}from"./index-BG6vf5fz.js";import{u as A,l as T}from"./useApi-CBYkAbkT.js";import{b,a as v,c as C}from"./band-CI1WAP09.js";import{m as $}from"./max-DBeXZoyG.js";const B={"01":"Q1","04":"Q2","07":"Q3",10:"Q4"},Q=(e,a)=>{const[n,p]=a[0].split("-"),t=B[p],r=d("#chart").node().getBoundingClientRect(),u=7.5,o="lightGreen",l=+d(e.target).attr("width"),m=e.clientX+l;let x=r.top+240;window.innerWidth<768&&(x=r.top+180),window.innerWidth<576&&(x=r.top+100),w({e,posX:m,posY:x,width:u,fillColor:o}),d("#tooltip").html(`
        <strong>
          ${n} ${t}
        </strong>
        <br>
        $${a[1].toLocaleString()} B
      `).attr("data-date",a[0])},z=e=>{const a=d("#chart").append("g").attr("transform","translate(40, 20)");a.append("text").attr("id","title").attr("x",-240).attr("y",20).attr("transform","rotate(-90)").text("Gross Domestic Product");const s=e.map(([t])=>+t.substring(0,4)),h=Array.from(new Set(s.filter(t=>t%5===0))),i=b().domain(e.map(([t])=>t)).range([0,600]),f=v(i),c=a.append("g").attr("id","x-axis").attr("transform","translate(0, 350)");c.call(f),c.selectAll("text").style("text-anchor","middle").text((t,r)=>h.includes(s[r])?s[r]:"").filter((t,r)=>r%4!==0).remove(),c.selectAll(".tick").filter((t,r,u)=>{var m;const o=u[r];if(!o||!(o instanceof Element))return!0;const l=o.querySelector("text");return l===null||((m=l.textContent)==null?void 0:m.trim())===""}).remove();const n=T().domain([0,$(e,([,t])=>t)??0]).range([350,0]),p=C(n).tickFormat(t=>`$${(+t/1e3).toString()} T`);a.append("g").attr("id","y-axis").call(p),a.selectAll(".bar").data(e).enter().append("rect").attr("class","bar").attr("fill",S.COLORS.green).attr("data-date",t=>t[0]).attr("data-gdp",t=>t[1]).attr("x",t=>i(t[0])??0).attr("y",t=>n(t[1])).attr("width",i.bandwidth()).attr("height",t=>350-n(t[1])).on("mouseover",Q).on("mouseout",t=>{y(t,"green")})},k=()=>(A("gdp").then(e=>{z(e.data)}).catch(e=>{e instanceof Error&&console.error(e)}),g(0,"chart"));export{k as BarChart};
