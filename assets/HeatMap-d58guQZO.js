import{r as x,c as A,s as w,h as M,a as $}from"./index-C0KkBgb8.js";import{d as k,i as y,e as N,f as V,g as C,u as E,b as v,a as F,c as O}from"./useApi-DCy-2oDQ.js";function R(t,a){let e,n;if(a===void 0)for(const o of t)o!=null&&(e===void 0?o>=o&&(e=n=o):(e>o&&(e=o),n<o&&(n=o)));else{let o=-1;for(let f of t)(f=a(f,++o,t))!=null&&(e===void 0?f>=f&&(e=n=f):(e>f&&(e=f),n<f&&(n=f)))}return[e,n]}function B(){var t=0,a=1,e,n,o,f,s=y,d=!1,l;function i(r){return r==null||isNaN(r=+r)?l:s(o===0?.5:(r=(f(r)-e)*o,d?Math.max(0,Math.min(1,r)):r))}i.domain=function(r){return arguments.length?([t,a]=r,e=f(t=+t),n=f(a=+a),o=e===n?0:1/(n-e),i):[t,a]},i.clamp=function(r){return arguments.length?(d=!!r,i):d},i.interpolator=function(r){return arguments.length?(s=r,i):s};function u(r){return function(g){var m,p;return arguments.length?([m,p]=g,s=r(m,p),i):[s(0),s(1)]}}return i.range=u(V),i.rangeRound=u(C),i.unknown=function(r){return arguments.length?(l=r,i):l},function(r){return f=r,e=r(t),n=r(a),o=e===n?0:1/(n-e),i}}function T(t,a){return a.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function S(){var t=k(B()(y));return t.copy=function(){return T(t,S())},N.apply(t,arguments)}function Y(t){for(var a=t.length/6|0,e=new Array(a),n=0;n<a;)e[n]="#"+t.slice(n*6,++n*6);return e}const J=t=>x(t[t.length-1]);var U=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Y);const H=J(U),b=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],L=(t,a,e)=>{const o="gray",f=t.clientY,s=a.variance>0?`+${a.variance.toFixed(2)}`:a.variance.toFixed(2);$({e:t,posY:f,width:10.5,fillColor:o}),w("#tooltip").html(`
      <strong>
        ${a.year.toString()} ${b[a.month-1]} 
      </strong>
      <br>
      ${(e+a.variance).toFixed(2)} °C | ${s} °C
    `)},P=t=>{const{baseTemperature:a,monthlyVariance:e}=t,n={top:0,right:60,bottom:20,left:80},o=800-n.left-n.right,f=400-n.top-n.bottom,s=w("#heat-map").attr("width",o+n.left+n.right).attr("height",f+n.top+n.bottom).append("g").attr("transform",`translate(${n.left.toString()}, ${n.top.toString()})`),d=[...new Set(e.map(c=>c.year.toString()))],l=v().range([0,o]).domain(d),i=v().range([0,f]).domain(b),u=R(e,c=>a+c.variance),r=u[0]??0,g=u[1]??0,m=S().interpolator(H).domain([g,r]);s.selectAll().data(e).enter().append("rect").attr("x",c=>l(c.year.toString())??0).attr("y",c=>i(b[c.month-1])??0).attr("width",l.bandwidth()).attr("height",i.bandwidth()).style("fill",c=>m(a+c.variance)).on("mouseover",(c,h)=>{L(c,h,a)}).on("mouseout",(c,h)=>{M(c,m(a+h.variance),!0)});const p=d.filter(c=>+c%10===0);s.append("g").attr("transform",`translate(0, ${f.toString()})`).call(F(l).tickValues(p)),s.append("g").call(O(i))},G=()=>(E("temperature").then(t=>{P(t)}).catch(t=>{t instanceof Error&&console.error(t)}),A(2,"heat-map"));export{G as HeatMap};
