import{c as f,s as c,d as s,h,b as S,a as x}from"./index-DIb872qn.js";import{g as O}from"./api-B62J5DUa.js";import{b as w,m as y,l as T,a as k,c as b}from"./linear-BLWLttxn.js";function L(e,n){let a;if(n===void 0)for(const o of e)o!=null&&(a>o||a===void 0&&o>=o)&&(a=o);else{let o=-1;for(let r of e)(r=n(r,++o,e))!=null&&(a>r||a===void 0&&r>=r)&&(a=r)}return a}const R=[{color:s.COLORS.darkRed,label:"Doping"},{color:s.COLORS.darkBlue,label:"No Doping"}],$=()=>{const n=c("#graph").append("g").attr("transform","translate(540, 20)");R.forEach((a,o)=>{const r=n.append("g").attr("transform",`translate(0, ${(o*20).toString()})`);r.append("rect").attr("width",15).attr("height",15).attr("fill",a.color),r.append("text").attr("x",22).attr("y",14).text(a.label)})},u=e=>{const[n,a]=e.split(":").map(Number);return n+a/60},C=e=>{const n=~~e,a=Math.round((e-n)*60);return`${String(n).padStart(2,"0")}:${String(a).padStart(2,"0")}`},W=(e,n)=>{x(192),c(e.target).style("fill",i=>i.Doping?s.COLORS.red:s.COLORS.blue);const l=e.clientX,d=e.clientY,m=+c(e.target).attr("width"),p=window.innerWidth,g=d+m+10;let t=l+10;t+192>p&&(t=p-192-10),c("#tooltip").style("display","block").html(`
      ${s.FLAGS[n.Nationality]}
      <strong>
        ${n.Name}
      </strong>
      <br>
        ${n.Time} | ${n.Year.toString()}
      <br>
      <span id='allegation'>
        ${n.Doping}
      </span>
    `).style("top",`${g.toString()}px`).style("left",`${t.toString()}px`)},Y=e=>{const n=c("#graph").append("g").attr("transform","translate(40, 20)");n.append("text").attr("id","title").attr("x",-240).attr("y",20).attr("transform","rotate(-90)").text("Time in Minutes");const a=e.map(t=>t.Year);a.sort((t,i)=>t-i);const o=w().domain(a.map(t=>t.toString())).range([0,600]).paddingOuter(.625).paddingInner(1),r=y(e,t=>t.Time?u(t.Time):0)??0,l=L(e,t=>t.Time?u(t.Time):0)??0,d=T().domain([r,l]).range([350,0]),m=Array.from({length:Math.ceil((r-l)*60/15)+1},(t,i)=>l+i*15/60),p=k(o),g=b(d).tickValues(m).tickFormat(C);n.append("g").attr("transform","translate(0, 350)").call(p),n.append("g").call(g),n.selectAll("circle").data(e).enter().append("circle").attr("r",6).attr("cx",t=>o(t.Year.toString())??0).attr("cy",t=>d(u(t.Time))).style("cursor",t=>t.URL?"pointer":"auto").style("fill",t=>t.Doping?s.COLORS.darkRed:s.COLORS.darkBlue).on("mouseover",W).on("mouseout",(t,i)=>{h(t,i.Doping?"darkRed":"darkBlue")}).on("click",S),$()},B=()=>(O("doping").then(e=>{Y(e)}).catch(e=>{e instanceof Error&&console.error(e)}),f(1,"graph"));export{B as ScatterplotGraph};
